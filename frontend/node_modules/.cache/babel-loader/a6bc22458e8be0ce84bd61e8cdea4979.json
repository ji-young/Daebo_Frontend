{"ast":null,"code":"import _slicedToArray from\"/Users/Jiyoung/Daebo_Project/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,Fragment}from'react';import{FormControlLabel,FormControl,FormLabel,RadioGroup,Radio,Box,Grid}from'@material-ui/core';import Searchref from'components/search/Search_ref';import Searchfood from'components/search/Search_food';import{connect}from'react-redux';import styles from'components/search/SearchStyle';import{withRouter}from'react-router-dom';import{getRecip2}from'ajax/ajax';import{setRecip}from'store/actions/index';import{setSerchInput}from'../../store/actions';import RecipList from'components/recip/reciplist.js';import CircularProgress from'@material-ui/core/CircularProgress';import logo from'./냉장고스몰.png';// with import\nimport{delUserInfo}from'store/actions/index';function Search(props){var classes=styles();var _useState=useState(''),_useState2=_slicedToArray(_useState,2),searchinpunt=_useState2[0],setsearchinpunt=_useState2[1];var _React$useState=React.useState(false),_React$useState2=_slicedToArray(_React$useState,2),loaded=_React$useState2[0],setloaded=_React$useState2[1];var _React$useState3=React.useState(false),_React$useState4=_slicedToArray(_React$useState3,2),searched=_React$useState4[0],setsearched=_React$useState4[1];function getRecipList(tags,jaryo){setloaded(false);console.log('씨발너냐');return new Promise(function(resolve){var res=getRecip2(tags,jaryo);// resolve(res)\nres.then(function(result){props.SetRecip(result);}).then(function(){setloaded(true);}).catch(function(error){console.log(error.response);if(error.response.status==401){alert('로그인해주세요');localStorage.removeItem(\"userInfo\");props.DelUserInfo();props.history.push(\"/Login\");}else if(error.response.status==404){alert('해당 재료의 조합을 찾을수 없어요.키워드와 재료를 변경하거나 오타를 확인하세요');setsearched(false);}else{getRecipList(tags,jaryo);}});resolve(res);});}function handleSearch(e){e.preventDefault();if(searchinpunt!==''){props.SetInput(searchinpunt);setsearchinpunt('');setsearched(true);// props.history.push(`/Result/${props.mode.mode}/`)\ngetRecipList(props.searchinput.input,props.jaryo);}}function handleChange(e){e.preventDefault();setsearchinpunt(e.target.value);}return/*#__PURE__*/React.createElement(Fragment,null,/*#__PURE__*/React.createElement(Box,{className:classes.root,align:\"center\"},/*#__PURE__*/React.createElement(Grid,{container:true,direction:\"column\",alignItems:\"center\",justify:\"center\"},/*#__PURE__*/React.createElement(Grid,{item:true,xs:12,sm:6,md:6},props.type==='레시피'&&!searched&&/*#__PURE__*/React.createElement(\"img\",{className:classes.img2,src:\"./assets/main_logo.png\"}),props.type==='레시피'&&searched&&/*#__PURE__*/React.createElement(\"img\",{className:classes.img,src:logo}),props.type==='맛집'&&/*#__PURE__*/React.createElement(\"img\",{className:classes.img,src:\"./assets/main.jpg\"}),props.type==='여행지'&&/*#__PURE__*/React.createElement(\"img\",{className:classes.img,src:\"./assets/\\uC5EC\\uD589.png\"}))),/*#__PURE__*/React.createElement(Grid,{item:true,xs:10,sm:6,md:4,lg:4},props.type==='레시피'&&/*#__PURE__*/React.createElement(Searchref,{onChange:handleChange,onClick:handleSearch,value:searchinpunt})),/*#__PURE__*/React.createElement(\"br\",null)),searched&&(loaded?/*#__PURE__*/React.createElement(RecipList,null):/*#__PURE__*/React.createElement(Box,{align:\"center\",margin:10},/*#__PURE__*/React.createElement(CircularProgress,null),/*#__PURE__*/React.createElement(FormLabel,{component:\"legend\"},\"\\uC7AC\\uB8CC\\uAC00 \\uB108\\uBB34 \\uC801\\uC73C\\uBA74 \\uB85C\\uB529 \\uC2DC\\uAC04\\uC774 \\uC18C\\uC694\\uB420\\uC218 \\uC788\\uC5B4\\uC694..!\"))));}var mapStateToProps=function mapStateToProps(state){return{mode:state.mode,// store 의 mode 를 props로 사용함\njaryo:state.jaryo,searchinput:state.searchinput// recipes : state.recipes\n};};var mapDispatchToProps=function mapDispatchToProps(dispatch){//SetMode 에 엑션 디스패치 연결\nreturn{SetRecip:function SetRecip(data){dispatch(setRecip(data));},SetInput:function SetInput(input){dispatch(setSerchInput(input));},DelUserInfo:function DelUserInfo(){dispatch(delUserInfo());}};};export default withRouter(connect(mapStateToProps,mapDispatchToProps)(Search));","map":{"version":3,"sources":["/Users/Jiyoung/Daebo_Project/frontend/src/components/search/SearchContainer.js"],"names":["React","useState","Fragment","FormControlLabel","FormControl","FormLabel","RadioGroup","Radio","Box","Grid","Searchref","Searchfood","connect","styles","withRouter","getRecip2","setRecip","setSerchInput","RecipList","CircularProgress","logo","delUserInfo","Search","props","classes","searchinpunt","setsearchinpunt","loaded","setloaded","searched","setsearched","getRecipList","tags","jaryo","console","log","Promise","resolve","res","then","result","SetRecip","catch","error","response","status","alert","localStorage","removeItem","DelUserInfo","history","push","handleSearch","e","preventDefault","SetInput","searchinput","input","handleChange","target","value","root","type","img2","img","mapStateToProps","state","mode","mapDispatchToProps","dispatch","data"],"mappings":"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","sourcesContent":["import React , {useState, Fragment} from 'react';\nimport { FormControlLabel ,FormControl ,FormLabel ,RadioGroup , Radio ,Box ,Grid  } from '@material-ui/core'\nimport Searchref from 'components/search/Search_ref'\nimport Searchfood from 'components/search/Search_food'\nimport { connect } from 'react-redux'\nimport styles from 'components/search/SearchStyle'\nimport { withRouter  } from 'react-router-dom';\nimport {getRecip2} from 'ajax/ajax'\nimport {setRecip} from 'store/actions/index' \nimport { setSerchInput } from '../../store/actions';\nimport RecipList from 'components/recip/reciplist.js'\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport logo from './냉장고스몰.png'; // with import\nimport {delUserInfo } from 'store/actions/index' \n\nfunction  Search(props) {\n  const classes = styles();\n  const [searchinpunt, setsearchinpunt] =  useState('');\n  const [loaded, setloaded] = React.useState(false);\n  const [searched, setsearched] = React.useState(false);\n\n\n  function getRecipList(tags, jaryo) {\n    setloaded(false)\n    console.log('씨발너냐')\n    return new Promise(function(resolve){\n      var res=  getRecip2(tags,jaryo)\n      // resolve(res)\n      res.then(result=>{\n        props.SetRecip(result)\n      })\n      .then(() =>{\n        setloaded(true)\n      }).catch(error => {\n        console.log(error.response)\n        if(error.response.status == 401){\n          alert('로그인해주세요')\n          localStorage.removeItem(\"userInfo\");\n          props.DelUserInfo() \n          props.history.push(`/Login`)\n        }else if(error.response.status == 404){\n          alert('해당 재료의 조합을 찾을수 없어요.키워드와 재료를 변경하거나 오타를 확인하세요')\n          setsearched(false)\n        }else{getRecipList(tags, jaryo)}\n    })\n      resolve(res)\n    })\n}\n\n\n\n  function handleSearch(e){\n    e.preventDefault();\n    if(searchinpunt !== ''){\n    props.SetInput(searchinpunt)\n    setsearchinpunt('')\n    setsearched(true)\n    // props.history.push(`/Result/${props.mode.mode}/`)\n    getRecipList(props.searchinput.input , props.jaryo)\n    }\n  }\n\n  function handleChange(e){\n    e.preventDefault();\n    setsearchinpunt(e.target.value)\n  }\n    return(\n\n        <Fragment>\n        <Box className={classes.root} align=\"center\">  \n        <Grid container\n              \n              direction=\"column\"\n              alignItems=\"center\"\n              justify=\"center\">\n\n            <Grid item  xs = {12} sm ={6} md ={6}>\n              {/* eslint-disable-next-line */}\n              {props.type ==='레시피' &&  !searched &&<img className={classes.img2} src='./assets/main_logo.png'></img>}\n              {/* eslint-disable-next-line */}\n              {props.type ==='레시피' &&  searched &&<img className={classes.img} src={logo}></img>}\n              {/* {props.type ==='레시피' && <Refrigerator></Refrigerator>} */}\n              {props.type ==='맛집' && <img className={classes.img} src='./assets/main.jpg'></img>}\n              {/* eslint-disable-next-line */}\n              {props.type ==='여행지' &&<img className={classes.img} src='./assets/여행.png'></img>}\n            </Grid>\n\n          </Grid>\n          \n          <Grid item xs = {10} sm ={6} md ={4} lg={4}  >\n          {/* <FormControl component=\"fieldset\">\n              <FormLabel component=\"legend\">검색 타입을 선택하세요</FormLabel>\n              <br/>\n              {\n              !searched && (<RadioGroup row aria-label=\"position\" name=\"position\" defaultValue=\"top\">\n              <FormControlLabel\n                onChange ={props.onChange}\n                value=\"맛집\"\n                control={<Radio color=\"primary\" />}\n                label=\"맛집\"\n                labelPlacement=\"start\"\n              />\n              <FormControlLabel\n               onChange ={props.onChange}\n                value=\"여행지\"\n                control={<Radio color=\"primary\" />}\n                label=\"여행지\"\n                labelPlacement=\"start\"\n              />\n              <FormControlLabel \n             onChange ={props.onChange}\n               value=\"레시피\" \n               control={<Radio color=\"primary\" />} \n               label=\"레시피\"\n               labelPlacement=\"start\"/>\n            </RadioGroup> )\n              \n              }\n                \n            </FormControl> */}\n\n            {props.type==='레시피' &&  (\n                 <Searchref onChange={handleChange} onClick={handleSearch} value ={searchinpunt}></Searchref>\n             )\n            }\n             \n            </Grid>\n            <br/>\n            {/* <Chatbot></Chatbot> */}\n        </Box>\n        {searched && (\n          \n          loaded ?(<RecipList></RecipList>) :(\n          <Box align='center' margin={10}>\n            <CircularProgress  />\n            <FormLabel component=\"legend\">재료가 너무 적으면 로딩 시간이 소요될수 있어요..!</FormLabel>\n         </Box> \n           ) \n        )\n        }\n        </Fragment>\n\n    )\n}\n\n\n\nconst mapStateToProps  = state => {\n  return{\n    mode : state.mode, // store 의 mode 를 props로 사용함\n    jaryo : state.jaryo,\n    searchinput : state.searchinput\n    // recipes : state.recipes\n  }\n}\n\nconst mapDispatchToProps  = dispatch => { //SetMode 에 엑션 디스패치 연결\n  return{\n    SetRecip : (data) =>{\n      dispatch(setRecip(data))\n    },\n    SetInput : (input) =>{\n      dispatch(setSerchInput(input))\n    },\n    DelUserInfo: ( ) => {\n      dispatch(delUserInfo( ));\n    }\n  }\n}\n\nexport default  withRouter(\n  connect(\n  mapStateToProps,mapDispatchToProps\n)(Search))"]},"metadata":{},"sourceType":"module"}