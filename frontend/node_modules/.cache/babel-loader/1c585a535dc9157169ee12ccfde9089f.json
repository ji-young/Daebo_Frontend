{"ast":null,"code":"import _slicedToArray from\"/Users/Jiyoung/Daebo_Project/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import{Select,Paper,InputBase,IconButton,MenuItem,Box,makeStyles,Grid}from'@material-ui/core';import{connect}from'react-redux';import Recipemodalscroll from'components/recip/recipemodalscroll.js';import SearchIcon from'@material-ui/icons/Search';import RecipList from'../components/recip/reciplist.js';import logo from'./냉장고스몰.png';// with import\nimport{withRouter}from'react-router-dom';import{getRecip,getRecip2}from'ajax/ajax';import{setRecip,delUserInfo}from'store/actions/index';import CircularProgress from'@material-ui/core/CircularProgress';var useStyles=makeStyles(function(theme){return{img:{},loading:{}};});function Result(props){var classes=useStyles();var _React$useState=React.useState('검색타입'),_React$useState2=_slicedToArray(_React$useState,2),age=_React$useState2[0],setAge=_React$useState2[1];var _React$useState3=React.useState(false),_React$useState4=_slicedToArray(_React$useState3,2),loaded=_React$useState4[0],setloaded=_React$useState4[1];var input;useEffect(function(){// didmounthook\nif(props.searchinput.input!==''){getRecipList(props.searchinput.input,props.jaryo,0);}else{getRecipList(JSON.parse(localStorage.getItem('searchinput')),JSON.parse(localStorage.getItem('jaryo')),0);}});function getRecipList(tags,jaryo,type){// setloaded(false)\nconsole.log('씨발너냐');return new Promise(function(resolve){var res=getRecip2(tags,jaryo);resolve(res);}).then(function(result){props.SetRecip(result);}).then(function(){setloaded(true);}).catch(function(error){console.log(error.response);if(error.response.status==401){alert('로그인해주세요');localStorage.removeItem(\"userInfo\");props.DelUserInfo();props.history.push(\"/Login\");}else if(error.response.status==404){alert('해당 재료의 조합을 찾을수 없어요.키워드와 재료를 변경해보세요');props.history.push(\"/Main\");}});}function getRecipList2(tags,jaryo){setloaded(false);return new Promise(function(resolve){var res=getRecip2(tags,jaryo);resolve(res);}).then(function(result){props.SetRecip(result);}).then(function(){setloaded(true);}).catch(function(error){console.log(error.response);if(error.response.status==401){alert('로그인해주세요');localStorage.removeItem(\"userInfo\");props.DelUserInfo();props.history.push(\"/Login\");}else if(error.response.status==404){alert('해당 재료의 조합을 찾을수 없어요.키워드와 재료를 변경해보세요');props.history.push(\"/Main\");}});}function handleSearch(e){e.preventDefault();console.log('!!');console.log(input);// if(input !== ''){\n//   if(props.searchinput.input!==''){\n//     getRecipList2(input, props.jaryo)\n//    }\n//   else {getRecipList(JSON.parse(localStorage.getItem('searchinput')),JSON.parse(localStorage.getItem('jaryo')))}\n//   input = ('')\n// }\nif(input!==''){getRecipList2(input,props.jaryo);}else{getRecipList(JSON.parse(localStorage.getItem('searchinput')),JSON.parse(localStorage.getItem('jaryo')));}}function handleChange(e){e.preventDefault();input=e.target.value;}console.log(props);return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(Box,{align:\"center\"},/*#__PURE__*/React.createElement(Grid,{item:true,xs:10,sm:7,md:4,lg:4},/*#__PURE__*/React.createElement(\"img\",{className:classes.img,src:logo}),/*#__PURE__*/React.createElement(Paper,null,/*#__PURE__*/React.createElement(Grid,{container:true,justify:\"center\",alignItems:\"center\"},/*#__PURE__*/React.createElement(Grid,{item:true,xs:8,sm:8,md:8},/*#__PURE__*/React.createElement(InputBase,{value:input,onChange:handleChange,fullWidth:true,inputProps:{'aria-label':'search google maps'}})),/*#__PURE__*/React.createElement(Grid,{item:true,xs:2,sm:2,md:2},/*#__PURE__*/React.createElement(IconButton,{\"aria-label\":\"search\"},/*#__PURE__*/React.createElement(SearchIcon,{margin:10,onClick:handleSearch}))))))),loaded?/*#__PURE__*/React.createElement(RecipList,null):/*#__PURE__*/React.createElement(Box,{align:\"center\",margin:20},/*#__PURE__*/React.createElement(CircularProgress,{className:classes.loading})));}var mapStateToProps=function mapStateToProps(state){return{mode:state.mode,// store 의 mode 를 props로 사용함\nuserinfo:state.userinfo,searchinput:state.searchinput,jaryo:state.jaryo};};var mapDispatchToProps=function mapDispatchToProps(dispatch){//SetMode 에 엑션 디스패치 연결\nreturn{SetRecip:function SetRecip(data){dispatch(setRecip(data));},DelUserInfo:function DelUserInfo(){dispatch(delUserInfo());}};};export default withRouter(connect(mapStateToProps,mapDispatchToProps)(Result));","map":{"version":3,"sources":["/Users/Jiyoung/Daebo_Project/frontend/src/pages/Result.js"],"names":["React","useState","useEffect","Select","Paper","InputBase","IconButton","MenuItem","Box","makeStyles","Grid","connect","Recipemodalscroll","SearchIcon","RecipList","logo","withRouter","getRecip","getRecip2","setRecip","delUserInfo","CircularProgress","useStyles","theme","img","loading","Result","props","classes","age","setAge","loaded","setloaded","input","searchinput","getRecipList","jaryo","JSON","parse","localStorage","getItem","tags","type","console","log","Promise","resolve","res","then","result","SetRecip","catch","error","response","status","alert","removeItem","DelUserInfo","history","push","getRecipList2","handleSearch","e","preventDefault","handleChange","target","value","mapStateToProps","state","mode","userinfo","mapDispatchToProps","dispatch","data"],"mappings":"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","sourcesContent":["import React , {useState, useEffect} from 'react';\nimport {Select,Paper,InputBase,IconButton ,MenuItem ,Box ,makeStyles,Grid  } from '@material-ui/core'\nimport { connect } from 'react-redux'\nimport Recipemodalscroll from 'components/recip/recipemodalscroll.js'\nimport SearchIcon from '@material-ui/icons/Search';\nimport RecipList from '../components/recip/reciplist.js'\nimport logo from './냉장고스몰.png'; // with import\nimport { withRouter  } from 'react-router-dom';\nimport {getRecip,getRecip2} from 'ajax/ajax'\nimport {setRecip, delUserInfo } from 'store/actions/index' \nimport CircularProgress from '@material-ui/core/CircularProgress';\n\nconst useStyles = makeStyles((theme) => ({\n  img : {\n\n  },\n  loading : {\n\n  }\n}));\n\nfunction Result(props){\n\n  const classes = useStyles();\n  const [age, setAge] = React.useState('검색타입');\n  const [loaded, setloaded] = React.useState(false);\n  var input\n  useEffect(() => { // didmounthook\n\n    if(props.searchinput.input!==''){\n      getRecipList(props.searchinput.input, props.jaryo,0)\n     }\n    else{getRecipList(JSON.parse(localStorage.getItem('searchinput')),JSON.parse(localStorage.getItem('jaryo')),0)}\n    \n  });\n\n  \n  function getRecipList(tags, jaryo,type) {\n    // setloaded(false)\n    console.log('씨발너냐')\n    return new Promise(function(resolve){\n      var res=  getRecip2(tags,jaryo)\n      resolve(res)\n    }).then(result=>{\n      props.SetRecip(result)\n    }).then(() =>{\n      setloaded(true)\n    }).catch(error => {\n      console.log(error.response)\n      if(error.response.status == 401){\n        alert('로그인해주세요')\n        localStorage.removeItem(\"userInfo\");\n        props.DelUserInfo() \n        props.history.push(`/Login`)\n      }else if(error.response.status == 404){\n        alert('해당 재료의 조합을 찾을수 없어요.키워드와 재료를 변경해보세요')\n        props.history.push(`/Main`)\n      }\n  })\n}\n\nfunction getRecipList2(tags, jaryo) {\n  setloaded(false)\n  return new Promise(function(resolve){\n    var res=  getRecip2(tags,jaryo)\n    resolve(res)\n  }).then(result=>{\n    props.SetRecip(result)\n  }).then(() =>{\n    setloaded(true)\n  }).catch(error => {\n    console.log(error.response)\n    if(error.response.status == 401){\n      alert('로그인해주세요')\n      localStorage.removeItem(\"userInfo\");\n      props.DelUserInfo() \n      props.history.push(`/Login`)\n    }else if(error.response.status == 404){\n      alert('해당 재료의 조합을 찾을수 없어요.키워드와 재료를 변경해보세요')\n      props.history.push(`/Main`)\n    }\n})\n}\n\n\nfunction handleSearch(e){\n  e.preventDefault();\n  console.log('!!')\n  console.log(input)\n  // if(input !== ''){\n  //   if(props.searchinput.input!==''){\n  //     getRecipList2(input, props.jaryo)\n  //    }\n  //   else {getRecipList(JSON.parse(localStorage.getItem('searchinput')),JSON.parse(localStorage.getItem('jaryo')))}\n  \n  //   input = ('')\n  // }\n  if(input !== ''){getRecipList2(input, props.jaryo)}\n  else {getRecipList(JSON.parse(localStorage.getItem('searchinput')),JSON.parse(localStorage.getItem('jaryo')))}\n}\n\n\nfunction handleChange(e){\n  e.preventDefault();\n  input =(e.target.value)\n}\n    console.log(props)\n        return (\n          <div>\n            <Box align=\"center\">\n                <Grid item xs = {10} sm ={7} md ={4} lg={4}  >\n                <img className={classes.img} src={logo}></img>\n                    <Paper>\n                    <Grid container justify=\"center\"  alignItems=\"center\">\n                        {/* <Grid item xs = {2} sm ={2} md ={2}>\n                            <Box >\n                            <Select\n                                    fullWidth={true} \n                                    value={age}\n                                    onChange={handleChange2}\n                                    label=\"검색타입\"\n                            >\n                                    <MenuItem value={10}>맛집</MenuItem>\n                                    <MenuItem value={20}>여행지</MenuItem>\n                                    <MenuItem value={30}>레시피</MenuItem>\n                            </Select>\n                            </Box>\n                        </Grid> */}\n                        <Grid item  xs = {8} sm ={8} md ={8}>\n                        <InputBase  \n                            value = {input}\n                            onChange={handleChange}\n                            fullWidth = {true}\n                            inputProps={{ 'aria-label': 'search google maps' }}\n                        />\n                        </Grid>\n                        <Grid item  xs = {2} sm ={2} md ={2}>\n                        <IconButton  aria-label=\"search\">\n                        <SearchIcon margin={10} onClick={handleSearch} />\n                        </IconButton>\n                        </Grid>\n                    </Grid>\n                </Paper>\n            </Grid>\n        </Box>\n        { loaded ?(<RecipList></RecipList>) :(\n         <Box align='center' margin={20}>\n           <CircularProgress className={classes.loading} />\n        </Box> \n          ) }\n          \n        </div>\n        )\n}\n\nconst mapStateToProps  = state => {\n    return{\n      mode : state.mode ,// store 의 mode 를 props로 사용함\n      userinfo :state.userinfo,\n      searchinput : state.searchinput,\n      jaryo : state.jaryo\n    }\n  }\n\n  \nconst mapDispatchToProps  = dispatch => { //SetMode 에 엑션 디스패치 연결\n  return{\n    SetRecip : (data) =>{\n      dispatch(setRecip(data))\n    },\n    DelUserInfo: ( ) => {\n      dispatch(delUserInfo( ));\n    }\n  }\n}\n  \n  export default withRouter (connect(\n    mapStateToProps,mapDispatchToProps\n  )(Result))"]},"metadata":{},"sourceType":"module"}