{"ast":null,"code":"import _slicedToArray from\"/Users/Jiyoung/Daebo_Project/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useCallback}from'react';import{makeStyles,TextField,Button,Container}from'@material-ui/core';import{login,join}from'ajax/ajax';import{connect}from'react-redux';import{setUserInfo}from'store/actions/index';import{withRouter}from'react-router-dom';var useStyles=makeStyles(function(theme){return{root:{paddingTop:90},TextField:{fullWidth:true,marginTop:20},Button:{marginTop:20}};});function BasicTextFields(props){var classes=useStyles();// eslint-disable-next-line\nvar _useState=useState(''),_useState2=_slicedToArray(_useState,2),id=_useState2[0],setId=_useState2[1];// eslint-disable-next-line\nvar _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),pw=_useState4[0],setPw=_useState4[1];// eslint-disable-next-line\nvar _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),pwConfirm=_useState6[0],setPwc=_useState6[1];// eslint-disable-next-line\nvar _useState7=useState(''),_useState8=_slicedToArray(_useState7,2),name=_useState8[0],setName=_useState8[1];// eslint-disable-next-line\nvar _useState9=useState(''),_useState10=_slicedToArray(_useState9,2),email=_useState10[0],setMail=_useState10[1];var onChangeId=useCallback(function(e){setId(e.target.value);},[]);// eslint-disable-next-line\nvar onChangePw=useCallback(function(e){setPw(e.target.value);},[]);var onChangePwc=useCallback(function(e){setPwc(e.target.value);},[]);// eslint-disable-next-line \nvar onChangeName=useCallback(function(e){setName(e.target.value);},[]);// eslint-disable-next-line \nvar onChangeEmail=useCallback(function(e){setMail(e.target.value);},[]);var onCheckId=function onCheckId(){if(id.replace(/^[A-Za-z0-9+]*$/g,''))return id.length>10?false:true;else return id.length>10?true:false;};var onCheckPw=function onCheckPw(){if(pw.replace(/^[A-Za-z0-9]{6,12}$/,''))return true;else return false;};var onCheckPwc=function onCheckPwc(){if(pw===pwConfirm)return true;else return false;};var onCheckEmail=function onCheckEmail(){if(email.replace(/^[0-9a-zA-Z]([-_\\.]?[0-9a-zA-Z])*@[0-9a-zA-Z]([-_\\.]?[0-9a-zA-Z])*\\.[a-zA-Z]{2,3}$/i,''))return true;else return false;};function DoJoin(){var res=join(id,name,email,pw);res.then(function(result){console.log(result.statusText);if(result.statusText=='Created'){alert('가입 성공');props.history.push(\"/Login\");}else{alert('가입실패');}});}// 유저 정보 디스패치\nfunction DoLogin(){var res=login(id,email,pw);res.then(function(result){localStorage.setItem(\"userInfo\",JSON.stringify({name:result.user,token:result.token,auth:true}));props.SetUserInfo({token:result.token,name:result.user,auth:true});props.history.push(\"/Main\");});}var handleSubmit=function handleSubmit(e){e.preventDefault();if(props.type==='Join'){if(onCheckId()===true||name.length>10||onCheckPw()===true||onCheckPwc()===false||onCheckEmail()===true||id.length===0||name.length===0||email.length===0||pw.length===0||pwConfirm.length===0)return alert('회원가입 양식에 맞춰서 작성해주세요.');else DoJoin();}else{DoLogin();}};return/*#__PURE__*/React.createElement(Container,{maxWidth:\"xs\",align:\"center\"},/*#__PURE__*/React.createElement(\"form\",{className:classes.root,onSubmit:handleSubmit,noValidate:true,autoComplete:\"off\"},/*#__PURE__*/React.createElement(\"div\",{className:\"logo-area\"},props.type==='login'?/*#__PURE__*/React.createElement(\"h1\",{className:\"logo-title\"},\"\\uB85C\\uADF8\\uC778\"):/*#__PURE__*/React.createElement(\"h1\",{className:\"logo-title\"},\"\\uD68C\\uC6D0\\uAC00\\uC785\"),/*#__PURE__*/React.createElement(TextField,{fullWidth:true,className:classes.TextField,required:true,error:onCheckId()===true?true:false,helperText:onCheckId()===true?\"아이디는 10자리 내에서 영문자, 숫자 조합만 가능합니다.\":\"아이디를 작성해주세요.\",onChange:onChangeId,id:\"name\",label:\"\\uC544\\uC774\\uB514\\uB97C \\uC785\\uB825\\uD574\\uC8FC\\uC138\\uC694.\"}),props.type==='login'&&/*#__PURE__*/React.createElement(TextField,{fullWidth:true,className:classes.TextField,required:true,onChange:onChangeEmail,type:\"email\",error:onCheckEmail()===true?true:false,helperText:onCheckEmail()===true?\"이메일 형식에 맞지 않습니다.\":\"이메일을 입력해주세요.\",id:\"email\",label:\"\\uC774\\uBA54\\uC77C\\uC744 \\uC785\\uB825\\uD574\\uC8FC\\uC138\\uC694.\"}),props.type==='Join'&&/*#__PURE__*/React.createElement(TextField,{fullWidth:true,className:classes.TextField,required:true,onChange:onChangeName,error:name.length>10?true:false,helperText:name.length>10?\"이름은 10글자 이내로 작성해주세요.\":\"이름을 작성해주세요.\",id:\"name\",label:\"\\uC774\\uB984\\uC744 \\uC785\\uB825\\uD574\\uC8FC\\uC138\\uC694.\"}),props.type==='Join'&&/*#__PURE__*/React.createElement(TextField,{fullWidth:true,className:classes.TextField,required:true,onChange:onChangeEmail,type:\"email\",error:onCheckEmail()===true?true:false,helperText:onCheckEmail()===true?\"이메일 형식에 맞지 않습니다.\":\"이메일을 입력해주세요.\",id:\"email\",label:\"\\uC774\\uBA54\\uC77C\\uC744 \\uC785\\uB825\\uD574\\uC8FC\\uC138\\uC694.\"}),/*#__PURE__*/React.createElement(TextField,{fullWidth:true,className:classes.TextField,type:\"password\",onChange:onChangePw,error:onCheckPw()===false?false:true,helperText:onCheckPw()===false?'비밀번호 입력해주세요.':'숫자와 문자 포함 형태의 6~12자리 입니다.',required:true,id:\"password\",label:\"\\uBE44\\uBC00\\uBC88\\uD638\\uB97C \\uC785\\uB825\\uD574\\uC8FC\\uC138\\uC694.\"}),props.type==='Join'&&/*#__PURE__*/React.createElement(TextField,{fullWidth:true,onChange:onChangePwc,id:\"passwordConfirm\",error:onCheckPwc()===true?false:true,helperText:onCheckPwc()===true?'비밀번호를 입력해주세요.':'비밀번호가 일치하지 않습니다.',className:classes.TextField,name:\"passwordConfirm\",type:\"password\",label:\"\\uBE44\\uBC00\\uBC88\\uD638 \\uD655\\uC778\"}),props.type==='login'?/*#__PURE__*/React.createElement(Button,{type:\"submit\",fullWidth:true,className:classes.Button,size:\"large\",variant:\"contained\",color:\"primary\"},\"\\uB85C\\uADF8\\uC778\"):/*#__PURE__*/React.createElement(Button,{fullWidth:true,type:\"submit\",className:classes.Button,size:\"large\",variant:\"contained\",color:\"primary\"},\"\\uD68C\\uC6D0\\uAC00\\uC785\"))));}var mapStateToProps=function mapStateToProps(state){return{userinfo:state.userinfo// store 의 mode 를 props로 사용함\n};};var mapDispatchToProps=function mapDispatchToProps(dispatch){//SetMode 에 엑션 디스패치 연결\nreturn{SetUserInfo:function SetUserInfo(userinfo){dispatch(setUserInfo(userinfo));}};};export default withRouter(connect(mapStateToProps,mapDispatchToProps)(BasicTextFields));","map":{"version":3,"sources":["/Users/Jiyoung/Daebo_Project/frontend/src/components/login/LoginForm.js"],"names":["React","useState","useCallback","makeStyles","TextField","Button","Container","login","join","connect","setUserInfo","withRouter","useStyles","theme","root","paddingTop","fullWidth","marginTop","BasicTextFields","props","classes","id","setId","pw","setPw","pwConfirm","setPwc","name","setName","email","setMail","onChangeId","e","target","value","onChangePw","onChangePwc","onChangeName","onChangeEmail","onCheckId","replace","length","onCheckPw","onCheckPwc","onCheckEmail","DoJoin","res","then","result","console","log","statusText","alert","history","push","DoLogin","localStorage","setItem","JSON","stringify","user","token","auth","SetUserInfo","handleSubmit","preventDefault","type","mapStateToProps","state","userinfo","mapDispatchToProps","dispatch"],"mappings":"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","sourcesContent":["import React, { useState, useCallback } from 'react';\nimport { makeStyles ,TextField, Button, Container } from '@material-ui/core';\nimport {login,join} from 'ajax/ajax'\nimport { connect } from 'react-redux'\nimport {setUserInfo} from 'store/actions/index' \nimport { withRouter  } from 'react-router-dom';\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    paddingTop : 90\n  },\n  TextField:{\n    fullWidth: true,\n    marginTop : 20\n  },\n  Button:{\n    \n    marginTop : 20\n  }\n\n}));\n\n\n\n\nfunction BasicTextFields(props) {\n \n  const classes = useStyles();\n  // eslint-disable-next-line\n  const [id, setId] =  useState('');\n  // eslint-disable-next-line\n  const [pw, setPw] =  useState('');\n  // eslint-disable-next-line\n  const [pwConfirm, setPwc] = useState('');\n  \n  // eslint-disable-next-line\n  const [name, setName] = useState('');\n  \n  // eslint-disable-next-line\n  const [email, setMail] = useState('');\n  \n  \n  const onChangeId = useCallback(e=>{\n   setId(e.target.value);\n\n  },[]);\n   // eslint-disable-next-line\n  const onChangePw = useCallback(e=>{\n    setPw(e.target.value);\n    \n  },[]);\n \n  const onChangePwc = useCallback(e=>{\n    setPwc(e.target.value);\n\n  },[]);\n\n   // eslint-disable-next-line \n   const onChangeName = useCallback(e=>{\n    setName(e.target.value);\n\n   },[]);\n\n   // eslint-disable-next-line \n   const onChangeEmail = useCallback(e=>{\n     setMail(e.target.value);\n   },[]);\n\n  const onCheckId = () => {\n\n    \n     if (id.replace(/^[A-Za-z0-9+]*$/g, '') ) \n          return id.length > 10 ? false : true;\n     else \n          return id.length > 10 ? true : false;\n\n  };\n  \n  const onCheckPw = () =>{\n    if(pw.replace(/^[A-Za-z0-9]{6,12}$/, ''))\n      return true;\n    else\n      return false; \n  }\n\n  const onCheckPwc = () => {\n    if(pw === pwConfirm) return true;\n    else\n      return false;\n  }\n\n  const onCheckEmail = () =>{\n    if(email.replace(/^[0-9a-zA-Z]([-_\\.]?[0-9a-zA-Z])*@[0-9a-zA-Z]([-_\\.]?[0-9a-zA-Z])*\\.[a-zA-Z]{2,3}$/i, ''))\n       return true;\n    else\n      return false;\n  }\n  function DoJoin(){\n    const res= join(id,name,email,pw)\n    res.then(\n      (result) =>{\n        console.log(result.statusText)\n        if(result.statusText == 'Created'){\n          alert('가입 성공')\n          props.history.push(\"/Login\")\n        }else{alert('가입실패')}\n      }\n    )\n  }\n\n// 유저 정보 디스패치\n  function DoLogin(){\n\n   const res= login(id,email,pw)\n   res.then((result)=>{\n    \n     localStorage.setItem(\n      \"userInfo\",\n      JSON.stringify({\n        name: result.user,\n        token:result.token,\n        auth:true\n      })  \n    );\n     props.SetUserInfo({\n      token:result.token,\n      name:result.user,\n      auth:true\n    })\n     props.history.push(\"/Main\")\n   })\n\n  }\n\n  const handleSubmit = (e) =>{\n    e.preventDefault();\n    if(props.type==='Join'){\n      if(onCheckId() === true || \n       name.length  >10 ||\n       onCheckPw() === true || \n      onCheckPwc() === false || \n      onCheckEmail() === true ||\n      id.length === 0 || \n      name.length === 0 ||\n      email.length === 0 ||\n      pw.length === 0 ||\n      pwConfirm.length === 0 \n      )      \n       return alert('회원가입 양식에 맞춰서 작성해주세요.');\n    else\n        DoJoin();\n    }else {\n      DoLogin();\n    }\n  }\n\n \n  return (\n\n    <Container maxWidth='xs' align='center'>\n    <form className={classes.root}\n      onSubmit={handleSubmit}\n      noValidate autoComplete=\"off\">\n        <div className=\"logo-area\">\n          {props.type==='login'? (\n              <h1 className=\"logo-title\">로그인</h1>\n              ) :(\n              <h1 className=\"logo-title\">회원가입</h1> \n            )\n          }\n            <TextField  fullWidth= {true} className={classes.TextField}  required\n                        error = {onCheckId() === true ? true : false }\n                        helperText = {onCheckId() === true ? \n                                      \"아이디는 10자리 내에서 영문자, 숫자 조합만 가능합니다.\" : \"아이디를 작성해주세요.\"}\n                        onChange={onChangeId} id=\"name\" label=\"아이디를 입력해주세요.\" />\n\n           {props.type ==='login' && (\n             <TextField fullWidth= {true} className={classes.TextField} required\n             onChange = {onChangeEmail}\n             type=\"email\"\n             error = {\n                   onCheckEmail() === true ? true : false\n             }\n             helperText = {\n                   onCheckEmail() === true ? \"이메일 형식에 맞지 않습니다.\" : \"이메일을 입력해주세요.\"\n             }\n             id=\"email\" label=\"이메일을 입력해주세요.\" />\n            )\n          }             \n           \n\n          {props.type==='Join' && (\n            <TextField fullWidth= {true} className={classes.TextField} required\n            onChange={onChangeName} \n            error = {name.length  > 10 ? true : false}\n            helperText={\n              name.length  > 10 ? \"이름은 10글자 이내로 작성해주세요.\" : \"이름을 작성해주세요.\"\n            }\n            id=\"name\" label=\"이름을 입력해주세요.\" />\n            ) \n          }\n\n          {props.type==='Join' && (\n            <TextField fullWidth= {true} className={classes.TextField} required\n            onChange = {onChangeEmail}\n            type=\"email\"\n            error = {\n                  onCheckEmail() === true ? true : false\n            }\n            helperText = {\n                  onCheckEmail() === true ? \"이메일 형식에 맞지 않습니다.\" : \"이메일을 입력해주세요.\"\n            }\n            id=\"email\" label=\"이메일을 입력해주세요.\" />\n            ) \n          }\n          \n        \n          <TextField fullWidth= {true} className={classes.TextField}    \n          type =\"password\"\n          onChange = {onChangePw}\n          error = {\n            onCheckPw() === false ? false : true\n          }\n          helperText ={\n            onCheckPw() === false ? '비밀번호 입력해주세요.' : '숫자와 문자 포함 형태의 6~12자리 입니다.'\n          }\n          required id=\"password\" label=\"비밀번호를 입력해주세요.\" />\n          \n          {props.type==='Join' && (\n            <TextField fullWidth= {true}\n            onChange={onChangePwc}\n            id=\"passwordConfirm\"\n            \n            error ={\n                onCheckPwc() === true ? false : true\n            }\n            helperText={\n              onCheckPwc() === true ? '비밀번호를 입력해주세요.' : '비밀번호가 일치하지 않습니다.'\n            }\n            className={classes.TextField}  name=\"passwordConfirm\" type=\"password\" label=\"비밀번호 확인\" />\n          )} \n\n\n          {props.type==='login' ? (\n            <Button type = \"submit\" fullWidth={true} className={classes.Button} size=\"large\" variant=\"contained\" color=\"primary\">\n              로그인\n            </Button>\n            ) : (\n            <Button fullWidth={true}\n              type = \"submit\"\n              className={classes.Button}  size=\"large\" variant=\"contained\" color=\"primary\">\n            회원가입\n          </Button>\n              )\n          }\n   \n      </div>\n    </form>\n    </Container>\n  );\n}\n\nconst mapStateToProps  = state => {\n  return{\n    userinfo : state.userinfo // store 의 mode 를 props로 사용함\n  }\n}\n\nconst mapDispatchToProps  = dispatch => { //SetMode 에 엑션 디스패치 연결\n  return{\n    SetUserInfo : (userinfo) =>{\n      dispatch(setUserInfo(userinfo))\n    }\n  }\n}\n\nexport default withRouter (\n  connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(BasicTextFields)\n)"]},"metadata":{},"sourceType":"module"}